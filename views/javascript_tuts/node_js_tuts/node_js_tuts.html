<html lang="en"><head>
  <meta charset="UTF-8">  
  <title>tutorial === Layout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/tutorial.css">
  <link rel="stylesheet" href="css/tooltip.css">
</head>
<body translate="no">
<div class="l-site">
  <div class="l-nav">
    <nav class="nav">
      <input type="text" placeholder="Search" id="search">
      <div style="clear: both;"></div>
      <!-- nunjucks loop-->
            
<ul class="links">
<!--list-tag-->
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">managing node version nvm</a><span class="tooltiptext">managing node version nvm</span>
                 
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">node package versions</a><span class="tooltiptext">node package versions</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>install packages npm i</a><span class="tooltiptext">install packages npm i</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>npm update, npm</a><span class="tooltiptext">npm update, npm</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>finding nearest node executive</a><span class="tooltiptext">finding nearest node executive</span>
                        
                    </ul>
                
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">importing and exporting in Common.js</a><span class="tooltiptext">importing and exporting in Common.js</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>function, string exports/require</a><span class="tooltiptext">function, string exports/require</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>exports/require Class instance</a><span class="tooltiptext">exports/require Class instance</span>
                        
                    </ul>
                
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">Default and Named export in Common.js and ES6</a><span class="tooltiptext">Default and Named export in Common.js and ES6</span>
                 
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">node dubugging in Chrome</a><span class="tooltiptext">node dubugging in Chrome</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>via chrome extension: simple file =&gt; node inspect</a><span class="tooltiptext">via chrome extension: simple file =&gt; node inspect</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>via chrome extension: simple file =&gt; node --inspect-brk</a><span class="tooltiptext">via chrome extension: simple file =&gt; node --inspect-brk</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>via chrome extension: RUN Sever =&gt; node --inspect</a><span class="tooltiptext">via chrome extension: RUN Sever =&gt; node --inspect</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>Chalk module helper for coloring console output</a><span class="tooltiptext">Chalk module helper for coloring console output</span>
                        
                    </ul>
                
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">VS code debug single file or server file (no config)</a><span class="tooltiptext">VS code debug single file or server file (no config)</span>
                 
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">VS code debug existing running server</a><span class="tooltiptext">VS code debug existing running server</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>(based on specific file</a><span class="tooltiptext">(based on specific file</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>(based on existing process)</a><span class="tooltiptext">(based on existing process)</span>
                        
                    </ul>
                
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">diffrence between exports.sth and module.exports = {}</a><span class="tooltiptext">diffrence between exports.sth and module.exports = {}</span>
                 
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">simple express node server</a><span class="tooltiptext">simple express node server</span>
                 
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">Express Middleware</a><span class="tooltiptext">Express Middleware</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>what is express Middleware ?</a><span class="tooltiptext">what is express Middleware ?</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>types of express Middleware</a><span class="tooltiptext">types of express Middleware</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>custom middleware</a><span class="tooltiptext">custom middleware</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>Delegating work to the Middleware (multiuse abstraction)</a><span class="tooltiptext">Delegating work to the Middleware (multiuse abstraction)</span>
                        
                    </ul>
                
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">express 4 routing and sub-routing</a><span class="tooltiptext">express 4 routing and sub-routing</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>register routers</a><span class="tooltiptext">register routers</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>sub-routing</a><span class="tooltiptext">sub-routing</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>combining same route in object with app.route(&#39;/..&#39;)</a><span class="tooltiptext">combining same route in object with app.route(&#39;/..&#39;)</span>
                        
                    </ul>
                
      </li>
    
      <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts">MongoDB and mongoose</a><span class="tooltiptext">MongoDB and mongoose</span>
                  
                    <ul class="linksNested">
                          
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>Define mongoDB connection and mongoose Schema</a><span class="tooltiptext">Define mongoDB connection and mongoose Schema</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>Mongoose data types</a><span class="tooltiptext">Mongoose data types</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>moongoose collection schema</a><span class="tooltiptext">moongoose collection schema</span>
                           
                          <li class="nav-primary tooltip"><a href="javascript_tuts/tuts_all_scripts_css/node_js_tuts" partition>mongoose populate ID</a><span class="tooltiptext">mongoose populate ID</span>
                        
                    </ul>
                
      </li>
    
<!--end-list-tag-->
</ul>

       <!-- nunjucks loop-->
    </nav>
  </div>
  <div class="l-page">
    <div class="menu">
      <div class="menu-hamburger"></div>
    </div>
      <!-- nunjucks loop-->
          
<div class="sectionWrapper">
  <div class="sectionContainer">
   
      
      <section  class="band band-b activeSection"  class="band band-b">
          <h1> managing node version nvm </h1> 
          

            
              <div class="band-container">
                <div class="band-inner">

                  <p>node version control (nvm)</p>
                  <div class="codeWraper">
                    <code>------
Those are the steps for setting up node version control for mac os:


1. create .bashrc or .bash_profile in your home directory 

(unless you already have one created one of another)

  cd ~ 
  
//create 

  &gt; .bashrc

2. use wget link to install nvm for the time of writing this it is 

    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh | bash

3 bash script should be updated and then check if installation created directory:

    cd ~/.nvm 

4. reload the bash script where the nvm is saved 

   source ~/.bashrc 

5. verify installation 

  command -v nvm

//or 

  nvm --version 


--------------------- installing node versions --------------------

1. install node version you required by 

    nvm install 12.13.0 
    nvm install 8.17.0  

or any version required 

2. set you default node by alias: 

    nvn alias default 12.13.0

3 set other alias

    nvm alias node8 8.17.0

    (or nvm alias name 8 major version if U have only one version istalled)

4. use default version by 

     nvm use default

4a. use other version or alias

     nvm use node8

-------------------------------------------------------------------------</code>
                  </div>
                </div>
              </div>
            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> node package versions </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>By defaualt any npm i/install package will install latest package with &#39;carret&#39; minor version as loadash:&#39;^1.3.4&#39; alowing minor
      update to the version up below 2 as explained below:

      There are 3 type of npm semenatic vesrioning:

      major - upgrade from 1.0.0 to 2.00 (usually breaking changes)
      minor - upgrade from 1.0.0 to max 1.9.0 (no breaking changes, minor changes)
      patch - upgrade from 1.0.0 to max 1.0.9 (no breaking changes, bug fix)

      From mpm 5.x.x by npm install package-lock.json will be created that tracks all exact versions of the packages.</p>
                  <div class="codeWraper">
                    <code>/-- outcome in package.json----/

  npm i lodash -S/ --save produces loadash:&#39;^1.3.4&#39; allowed updated below 2.

  npm i lodash@1.4.5 -S/ --save produces loadash:&#39;1.4.5&#39; no updates version.

  npm i lodash -SE/ --save produces loadash:&#39;1.7.4&#39;(any latest same as npm i lodash@latest -SE/) not allowed updates.


  explained:
  //there is no information how to istall patch version of a package ~1.3.4 , so for now just need to be updated manually
  in package.json if needed.</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>this will update all your package in a scope of the folder even if package-lock.json is present. 
/--/

npm update =&gt; updates project local packages

npm update packagename = updates one package 

npm update -g =&gt; updates globall installed packages

npm update packagename -g = updates one package installed globally 

there is some usufull npm commands that will tell you if your packages needs update to prevent errors
/--/</p>
                  <div class="codeWraper">
                    <code>/----/

//list packages needed update locally / -g globally 
 -- npm outdated 



/-------- npm list ----------/

//view curent installed version locally / -g globally 
npm list --depth 0 

---IMPORATANT ---

this command also flags that which packages needs attentsion, update flaged as: UNMET PEER DEPENDENCY
U need to habe node_modules alredy present so after npm install. npm outdated it wont flag outdated packges
if they are not installed , so always run FIRST ::  npm list --depth 0 



//----------- npm update ----------/

this command will FIX all unmet depedencies regardless the package-lock.json versioning 
IMPORTANT any package needs updating it has to have minor or patch version enables in package.json
from node-sass:&#39;1.3.4&#39; it has to have node-sass:&#39;^1.3.4&#39; or node-sass:&#39;`1.3.4&#39;. It will not install 
update otherwise!

------------------------------------

//update all package / -g globally
-- npm update

//update single package / -g globally
-- npm update package

------ minor usage npm commands -------

//list all historical version about the package / -g globally
-- npm view enzyme versions

//clean unused dependencies (it wont fix unmet dependecies errors just will do repository clean up)
-- npm prune /or npm prun package

//package home page 
-- npm home package

//package repo page 
-- npm repo package

//package docs page 
-- npm docs package

//list curent bugs page 
 -- npm bugs package

/--/</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-3">
                <div class="band-inner">

                  <p>node executive for pacakges are kept in /bin directory and can be find by below commands</p>
                  <div class="codeWraper">
                    <code>/- find nearest node exectuble 
                //npm bin

                //once U have this you can run local package as gulp as:
                /Users/gilg/dev/myTuts/views/javascript_tuts/node_js_tuts/node_modules/.bin/gulp

                IMPORTANT package has to be in directory .bin/package and has to have executables as gulp does ;)</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> importing and exporting in Common.js </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>The CommonJS (CJS) format is used in Node.js and uses require and module.exports to define dependencies and modules. The npm ecosystem is built upon this format. There are 2 ways of exporting in Commonjs which is 
            deafult and named export. This one show how to export no-class js elements</p>
                  <div class="codeWraper">
                    <code>/******** Two ways of exporting  ******/

              
              /1 ********** common.js default export function **************/

              function maxNumber(int1, int2) {
                  return Math.max(int1, int2);
                }

              module.exports = maxNumber;

              /1 ********** usage of default export *******/

              const anyName = require(&#39;./maxNumber&#39;)
              anyName(4,5)


              ..notice once default funcion export is required can take any name 
              but still it is the function we exported just under any name.
             /******************/

              /1a ********** common.js default export string **************/

               module.exports = &#39;anySring&#39;;
               const anyName = require(&#39;./module&#39;)
               //for a string
               console.log(anyName) //prints &#39;string&#39;

                ..notice once default sting export is required can take any name 
              but still it is the string we exported just under any name.
             /******************/
                


              /2 ********** common.js function named export **************/

              function maxNumber(int1, int2) {
                  return Math.max(int1, int2);
                }

              module.exports.maxNumber = maxNumber;
              //or
              module.exports = { maxNumber };

               /2 ********** usage of default function export *******/

               const module = require(&#39;./generateRandomNumber&#39;)
               module.maxNumber Number(3, 10)


              /2a ********** common.js named export string **************/

               module.exports.myString = &#39;anySring&#39;;
               //or 
               module.exports = { myString: &#39;anySring&#39; };

               const anyName = require(&#39;./module&#39;)
               //for a string
               console.log(anyName.myString) //prints &#39;string&#39;</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>The CommonJS (CJS) format is used in Node.js and uses require and module.exports to define dependencies and modules. The npm ecosystem is built upon this format. There are 2 ways of exporting in Commonjs which is 
            deafult and named export.</p>
                  <div class="codeWraper">
                    <code>/******** Two ways of exporting  Module/Class******/

              
              /1 ********** common.js default export **************/

              class Operations {
                // Method
                maxNumber(int1, int2) {
                  return Math.max(int1, int2);
                }
              }

              module.exports = Operations;

              /1 ********** usage of default export *******/

              const Operations = require(&#39;./generateRandomNumber&#39;)
              const op = new Operations()
              op.maxNumber(3, 10)

             /******************/


              /2 ********** common.js named export **************/

               class Operations {
                // Method
                maxNumber(int1, int2) {
                  return Math.max(int1, int2);
                }
              }

              module.exports = Operations;


               /2 ********** usage of default export *******/

               const Operations = require(&#39;./generateRandomNumber&#39;).Operations
               const op = new Operations()
               op.max Number(3, 10)</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> Default and Named export in Common.js and ES6 </h1> 
          

            
              <div class="band-container">
                <div class="band-inner">

                  <p>if you enviroment accepst both standards Common.js you can use both 
            export/import format in conjunction.</p>
                  <div class="codeWraper">
                    <code>/******** given maxNumber function ******/

                function maxNumber(int1, int2) {
                  return Math.max(int1, int2);
                }


               /******** deafult export both ES6 and common.js ******/

               //common.js
               module.exports = maxNumber;
               //ES6
               export default  maxNumber




               /******** named export both ES6 and common.js ******/

               //common.js
               module.exports.maxNumber = maxNumber;
               //or 
               module.exports = {maxNumber}

               //ES6
               export {maxNumber}
               //or 
               export function maxNumber(){}
               //or 
               export const maxNumber = () =&gt; {}</code>
                  </div>
                </div>
              </div>
            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> node dubugging in Chrome </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>Dubbing node needs to be done in set up enviroment. Chrome build extension to make one and it could be 
              set up as: 
                    1. Run node (file/app) in debugg mode 

                        node inspsect file.js</p>
                  <div class="codeWraper">
                    <code>/***** Process of running dubugger for simple file ******/


1.  node inspsect file.js (notice is not node --inspect this one is resevered for file running server)

that produces a link as : 

    ws://127.0.0.1:9229/340e2dc2-bb4f-4744-bcfe-8d25788d3ef1 

copy this only : 

    127.0.0.1:9229/340e2dc2-bb4f-4744-bcfe-8d25788d3ef1 === localhost:9229/340e2dc2-bb4f-4744-bcfe-8d25788d3ef1

then U will get a message:
&#39;Websockets request was expeceted&#39;  ==&gt; that means we need server running (point 2)

2.  it needs server to run thefore we need to provide one from node chrome extension 

    chrome://inspect 

will give you option to run server and pick file you want to debug on:
(it should be automatically detected)

 /******/</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>Dubbing node needs to be done in set up enviroment. Chrome build extension to make one and it could be 
              set up as: 
                    1. Run node (file/app) in debugg mode 

                        node --inspsect-brk file.js 

                    This allows you to run file and server in chrome extension at ones</p>
                  <div class="codeWraper">
                    <code>/***** Process of running dubugger for simple file ******/


1.  node inspsect file.js 

  node --inspsect-brk file.js

this command does both (doesnt produce link since open debug mode with server straigh away)</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-3">
                <div class="band-inner">

                  <p>Dubbing node needs to be done in set up enviroment. Chrome build extension to make one and it could be 
              set up as: 
                    1. Run node (file/app) in debugg mode 

                        node --inspsect-brk server.js 

                    This allows you to run file and server in chrome extension at the same time</p>
                  <div class="codeWraper">
                    <code>/***** Process of running dubugger for simple file ******/


1.  set up your sever site that uses express server 

//-------- example server.js -------------

var express = require(&#39;express&#39;);
var app = express();

// process.env.PORT lets the port be set by Heroku
var port = 8080;

// set the home page route
app.get(&#39;/&#39;, function(req, res) {
  debugger;
  res.send(&#39;hi there printed&#39;)
});

app.listen(port, function() {
console.log(&#39;Our app is running on http://localhost:&#39; + port);
});

//-------- example server.js -------------

2. Run sever in debug mode:

   node --inspsect-brk server.js 

3. set up websocket if previos command comes up with the link instead of opening debug chrome right away 

4. play with debugging rembering that u set up enviroment so the file wont work from beggining everytime if

  so if you are on : localhost:3000

  then the code after refreshing it will only come to here: 

  app.get(&#39;/&#39;, function(req, res) {
    debugger;
    res.send(&#39;hi there printed&#39;)
  });

  IT wont run entire file since it remmbers that this already run so just will run when is current state is 
  which is  app.get(&#39;/&#39;) for localhost:3000
  or any other route app.get(&#39;/test&#39;) for localhost:3000/test etc...</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-4">
                <div class="band-inner">

                  <p>Chalk module allows to make diffrent font colors and background to easisly spot your logs 
              among other logs. so simply 

                  npm i -D chalk

              and start looking your logs in color ;) not black and white !</p>
                  <div class="codeWraper">
                    <code>//-------- example server.js with chald debug color -------------

var express = require(&#39;express&#39;);
var app = express();
const chalk = require(&#39;chalk&#39;);

// process.env.PORT lets the port be set by Heroku
var port = 8080;

// set the home page route
app.get(&#39;/&#39;, function(req, res) {

  console.log(chalk.blue.bgRed.bold(&#39;Hello world!&#39;));
  debugger
  res.send(&#39;hi there printed&#39;)
});

app.listen(port, function() {
console.log(&#39;Our app is running on http://localhost:&#39; + port);
});

//-------- example server.js -------------</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> VS code debug single file or server file (no config) </h1> 
          

            
              <div class="band-container">
                <div class="band-inner">

                  <p>VS code allow you to debug file without any configuration in node mode on mode mode(preview)</p>
                  <div class="codeWraper">
                    <code>//--------- any file.js ------------------

1. open file file.js
2. click on debug icon and pick node.js
3. start debugging it should stop on break points or/and debbuggers keywords

 //---------------------------


  //--------- any server.js file ------------------
      //any file that can be previed since it outputs server response

1. open file server.js as 

-----------

    var express = require(&#39;express&#39;);
    var app = express();

    // process.env.PORT lets the port be set by Heroku
    var port = 8080;
    // set the home page route
    app.get(&#39;/&#39;, function (req, res) {
      debugger;
      res.send(&#39;hi there printed changed&#39;);
    });

    app.listen(port, function () {
      console.log(&#39;Our app is running on http://localhost::&#39; + port);
    });

-----------

2. click on debug icon and pick ===&gt;  node.js(preview)

3. start debugging it should stop on break points or/and debbuggers keywords

               //---------------------------</code>
                  </div>
                </div>
              </div>
            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> VS code debug existing running server </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>Sometimes you want attach debugger to existing running server and run specific file. Then you need below configuration

&quot;configurations&quot;: [
    {
      &quot;name&quot;: &quot;Attach by server file&quot;,
      &quot;request&quot;: &quot;attach&quot;,
      &quot;program&quot;: &quot;${workspaceFolder}/server.js&quot;,
      &quot;type&quot;: &quot;node&quot;
    }
  ]</p>
                  <div class="codeWraper">
                    <code>1: set up configuration:

 &quot;configurations&quot;: [
    {
      &quot;name&quot;: &quot;Attach by server file&quot;,
      &quot;program&quot;: &quot;${workspaceFolder}/server.js&quot;,
      &quot;request&quot;: &quot;attach&quot;,
      &quot;type&quot;: &quot;node&quot;
    }
  ]

2: run your server application in terminal like for nodemon script

   npm run nodemon  

   (for script &quot;nodemon&quot;:&quot;nodemon serverFile.js&quot; when you have local install)

3. then start your debugger sesion and pick the process id from the list for your running service 

4. go to your localhost:8080 and refresh the page it should stop at your break points or/and debbugerers</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>Sometimes you want attach debugger to existing running server by process Id. Then you need below configuration

&quot;configurations&quot;: [
    {
      &quot;name&quot;: &quot;Attach by Process ID&quot;,
      &quot;processId&quot;: &quot;${command:PickProcess}&quot;,
      &quot;request&quot;: &quot;attach&quot;,
      &quot;type&quot;: &quot;node&quot;
    }
  ]</p>
                  <div class="codeWraper">
                    <code>1: set up configuration:

 &quot;configurations&quot;: [
    {
      &quot;name&quot;: &quot;Attach by Process ID&quot;,
      &quot;processId&quot;: &quot;${command:PickProcess}&quot;,
      &quot;request&quot;: &quot;attach&quot;,
      &quot;type&quot;: &quot;node&quot;
    }
  ]

2: run your server application in terminal like for nodemon script

   npm run nodemon  

   (for script &quot;nodemon&quot;:&quot;nodemon serverFile.js&quot; when you have local install)

3. then start your debugger sesion and pick the process id from the list for your running service 

4. go to your localhost:8080 and refresh the page it should stop at your break points or/and debbugerers</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> diffrence between exports.sth and module.exports = {} </h1> 
          

            
              <div class="band-container">
                <div class="band-inner">

                  <p>module.exports = {} usually exports an object,function , once exports.sth can export anything . 
              Rules:  
                1. U can not user module.exports = {} and exports in the same file
                2. module.exports = {} can be only one in the file. As defualt export in ES6 modules.
                3. exports can be used multiple times in the file. As { named exports } in ES6 modules.

                in short !!
                As module.exports and exports both point to the same object, it doesn’t normally matter which you use. 
                For example:

                  exports.foo = &#39;foo&#39;;
                  module.exports.bar = &#39;bar&#39;;

                //however for individual export U should use 
                exports.foo = &#39;foo&#39;;

                because it is possible to override module.exports object by below somewhere in the files

                module.exports = ()=&gt;{ //some function }</p>
                  <div class="codeWraper">
                    <code>/ --- export same object both ways ----/

  exports.text1 = &#39;text1&#39;;
  exports.text2 = &#39;text2&#39;;
  exports.text3 = &#39;text3&#39;;

/ --- request exports ---/

  var texts = require(./texts)
  console.log(texts.text1)
  console.log(texts.text2)
  console.log(texts.text3)

/ --- same with module.exports -----/

module.exports = {
  text1: &#39;text1&#39;,
  text2: &#39;text2&#39;,
  text3: &#39;text3&#39;,
}

/ --- request exports same way---/

  var texts = require(./texts)
  console.log(texts.text1)
  console.log(texts.text2)
  console.log(texts.text3)


/----  module.export exporting a function --- /

    module.exports = function(param){}

/ --- request exports and invoke---/

    require(./function)(param)

/ --- /

/----  module.export exporting a named function --- /

    function startJob(param){
      //it doesnt need to return as any function;
      return &#39;job started,&#39;+param
    }

    module.exports.startJob = startJob
    //or 
    expors.startJob = startJob //preferable way since it doesnt intefere with global module.exports

/ --- request exports and invoke named function---/

    cosnt resultOfNamedFunction = require(./namedFunction).startJob(&#39;now&#39;);

    console.log(resultOfNamedFunction) //logs job started,now 

/ --- /</code>
                  </div>
                </div>
              </div>
            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> simple express node server </h1> 
          

            
              <div class="band-container">
                <div class="band-inner">

                  <p>this is simple start up setup for node.js server with express it works on heroku as  well as localhost,
              it needs script in package.json: start:node file.js (file your sever below) it also supports ejs engine templating</p>
                  <div class="codeWraper">
                    <code>--------- server.js ----------------

var express = require(&#39;express&#39;);
var app = express();
const bodyParser = require(&#39;body-parser&#39;);
const cors = require(&#39;cors&#39;)

// process.env.PORT lets the port be set by Heroku
  var port = process.env.PORT || 8080;

// set the view engine to ejs
  app.set(&#39;view engine&#39;, &#39;ejs&#39;);

// make express look in the public directory for assets (css/js/img)
  app.use(express.static(__dirname + &#39;/public&#39;));

app.use(cors())
app.use(bodyParser.json())
app.use(bodyParser.urlencoded({ extended: true }))

// set the home page route
app.get(&#39;/&#39;, function(req, res) {
  //U need to specify header the bare minimum
  res.header(&#39;Content-Type&#39;, &#39;text/html; charset=utf-8&#39;)
  res.render(&#39;index&#39;);
  //res.end(&#39;hi&#39;);
});

app.get(&#39;/json&#39;, (req, res) =&gt; {
  res.header(&#39;Content-Type&#39;, &#39;application/json; charset=utf-8&#39;)
  res.json({json:&#39;it is json response object set&#39;})
})

app.listen(port, function() {
console.log(&#39;Our app is running on http://localhost:&#39; + port);
});

--------------------------------------------</code>
                  </div>
                </div>
              </div>
            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> Express Middleware </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>Express is only resposible for routing which works on top of native node moduel http. For anything else is using middleware. And middle is short 
        is just a function(req,res,next) that execute and goes to the next() middlware function until we return res.next() or any other response.</p>
                  <div class="codeWraper">
                    <code>/ ------- example middleware --------- /

app.use(function(res,req,next)=&gt;{
//do your staff and return next() when U are done!
next();
//next will go to the next middleware function
})

/--- those are the most common middleware for exprsss ---/

app.use(cors())
app.use(bodyParser.json())
app.use(bodyParser.urlencoded({ extended: true }))

explanation:
cors is used for non-block sameorigin http calls
bodyparser alows you to get content of http request by req.body

/------ IMPORATANT even routes are constructed as middleware function ----/

app.get(&#39;/legos&#39;),(req,res,next)=&gt;{
//posible response 
rest.send()
res.header(&#39;Content-Type&#39;, &#39;application/json; charset=utf-8&#39;)
res.render(&#39;index&#39;);

/-----   but you could also call next() if there is no res.something() already 
/-----   route is the last on the list to visit that is why it needs to responded at that point not next()

})</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>There are several types of express middleware: U can devide them into internal and third-party middleware. The order you execute your middleware
              matters as explained below:</p>
                  <div class="codeWraper">
                    <code>/ -------- /
application middleware/build-in middleware
/------/

those need to be executed first cause they are resposible for setting our static files
app.use(express.static(&#39;views&#39;))

/ -------- /
third-party middleware
/------/

those depends what they do they should be executed before certain action being detected as for bodyParser before receiving routes
app.use(bodyParser.json())
app.use(bodyParser.urlencoded({ extended: true }))

/ ------ /
routes 
/---- / 

U might be suprise why routes are in a middlware section?, well they are part of them when we excute route We want to respond to the browser 
as res.render(index) but we can also handle error by next(error) to be send to our error middleware 

/ ------ /
error middleware (it always needs 4 params to detect from other middleware )
/---- / 

/lets assume we have below route that triggers error

app.get(&#39;/legos&#39;),(req,res,next)=&gt;{
  next(new Error(&#39;no way!&#39;))
})
  app.use(function(err,res,req,next)=&gt;{
  //handle error
  console.log(error)
  //do your staff and return next() when U are done!
  next();
})

/------/</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-3">
                <div class="band-inner">

                  <p>the beauty of middleware is the fact that is just a function! so we can easily make custom ones to serve our purpose in a middlware chain.</p>
                  <div class="codeWraper">
                    <code>/ ---- /
  custom middleware request it is with a dot adnotation so node recognize it as custom note a module from node_modules;
/ ----/

car customMiddlware = require(&#39;./custom&#39;)

/---- quite often our custom middleware is wrapped in higher order functio to pass some params ---/

const custom = (param)=&gt;{
  return fuction(req,res,next){
  //do something 
  next()
  //move on to the next one...
  }
}

/---- execute custom middleware ----/

app.get(&#39;/legos&#39;, custom(param), function(req,res,)=&gt;{
  res.render(&#39;I am cool now!&#39;)
})

explanation:
the custom midllware could be execute on route level, so the application gets to route and then executes the stack of middlware
on this level it could take fuctions or array of functions

app.get(&#39;/legos&#39;, custom(param),custom1(param), function(req,res,)=&gt;{})

stack = [custom(param),custom1(param)];
app.get(&#39;/legos&#39;, stack, function(req,res,)=&gt;{})


/ ---- /</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-4">
                <div class="band-inner">

                  <p>Express comes with some helper middleware as app.param that alows you to do some logic outsite the route and then give you the result back in route</p>
                  <div class="codeWraper">
                    <code>/--- let say U got route as one below ----/

/----
now every time we hit any route with id as &#39;legos/:i d&#39; or &#39;lions/lion/:id&#39; 
express can delegate what we can do with id in a seperate middlware 
 ----\

app.param(&#39;id&#39;, function(req,res,next){
  //do something with id
  next()
  //move on to next
})

/--- this route has to be after app.param --/
app.use(&#39;legos/:id&#39;,function(req,res){})

/--/</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> express 4 routing and sub-routing </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>express 4.&gt; allows you to register more that one router which a milestone from express 3. that hold everthing on app.router() level.</p>
                  <div class="codeWraper">
                    <code>/ ---- regiser routets  ----/

var toDoListRouter = express.Router();
var guesscheckoutRouter = express.Router();

//now regiester them with the main app express;
app.use(&#39;/toDoListRouter&#39;,loginRouter)
app.use(&#39;/guesscheckout&#39;,guesscheckoutRouter)

explanation:
app.use(&#39;/guesscheckout&#39;,guesscheckoutRouter) middleware allows to delegate the work of handling any /guesscheckout/...
routes to the guesscheckoutRouter middleware

/-----/</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>sub-routing allow you to create addtional routes that derived from master route as app.get(/masterPath/)</p>
                  <div class="codeWraper">
                    <code>/---- register our route with main app and delegate any /guesscheckout/additionalpath to loginRouter path ---/

app.use(&#39;/guesscheckout&#39;,guesscheckout)


/ ---- sub-routes to /guesscheckout path -----/

guesscheckout.get(&#39;/&#39;,function(req,res){
//this routes corresponds to /guesscheckout/ === /guesscheckout
res.render(&#39;..ok I will do it&#39;)}
)
guesscheckout.get(&#39;/:id&#39;,function(req,res){
 //this routes corresponds to /guesscheckout/:id 
res.render(&#39;..yeah I am a guest !&#39;)
})

info:
sub-routing are great for organizing, abstracting away your routes and put them in seperate file and simple export to require them in main server file:
module.exports = guesscheckout

 /----/</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-3">
                <div class="band-inner">

                  <p>lets say We have app.get(&#39;/lions&#39;) and then we have app.post(&#39;/lions&#39;), we can put them in one place...</p>
                  <div class="codeWraper">
                    <code>/ ------ request on the same route as: -----/

app.get(&#39;/lions&#39;,(req,res)=&gt;{})
app.post(&#39;/lions&#39;(req,res)=&gt;{})

/ --- use app.route() to put them together --/

app.route(&#39;/lions&#39;)
.get(&#39;/lions&#39;,(req,res)=&gt;{})
.post(&#39;/lions&#39;(req,res)=&gt;{})

/-----/</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
      
      <section   class="band band-b" class="band band-b">
          <h1> MongoDB and mongoose </h1> 
          
              <div class="band-container partition first" part="part-1">
                <div class="band-inner">

                  <p>MongoDB is noSQL database , that is just a giant object that would exept any data without any validation. It needs 
              3th party products to make sure the data is set according the data models schema and is valid.</p>
                  <div class="codeWraper">
                    <code>/----- example mongoDb connection in node.js ---/

/ -----   /
var mongoose = require(&#39;mongoose&#39;);
var url = &quot;mongodb://localhost:27017/mydb&quot;;
mongoose.connect(&#39;mongodb://localhost:27017/myapp&#39;, {useNewUrlParser: true});
/ -----   /
explanation:
mongodb://localhost:27017/myapp =&gt; where myApp is name of DB that is running on localhost PORT:27017
practically, If U plan to publish your app is better to set up your DB on host domain as myLAB for heroku

/ -----   /</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-2">
                <div class="band-inner">

                  <p>Moongoose allows U to make schema therfore comes with some extra data types to make that happen.</p>
                  <div class="codeWraper">
                    <code>/ ----------- /
  Sample data type are:
  String,
  Number,
  Boolean,
  Object,
  Array,
  OBjectId, (this is reference to other model)
Date,
/ ------ /</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-3">
                <div class="band-inner">

                  <p>mongoose allows U to crate schema for every collection you make in mongoDB making sure the data pass in is correct</p>
                  <div class="codeWraper">
                    <code>/ ---   example mongoose schema ------/


var PostSchema = {
  title:{
    type:String,
    required:true,
    unique:true
  }
  text:{
    type:String,
    required:true
    }
  author:{
    type:Shema.Types.ObjectId
    ref:&#39;user&#39;
  }
  categories:[
    {
    type:Shema.Types.ObjectId
    ref:&#39;category&#39;
  }]
}

/---- the possible post could be: ----/
&quot;posts&quot;:{
  &quot;title&quot;: &quot;Life of PI&quot;
  &quot;text&quot;: &quot;Aparently is a great book and movie!&quot;
  author: &quot;ObjectId(436353453535353e423d)&quot;
  categories:[
      &quot;ObjectId(4r554353453535353e423d)&quot;,
      &quot;ObjectId(43336353453535353e423d)&quot;
      &quot;ObjectId(55555353453535353e423d)&quot;
  ]
}

explanation:
Post model has PostSchema that has fields: title, text, author, categories.
Notice that author and categories are diffrent: 
author is referenced in user Model with its ID.
categories are in array referenced in category Model by its IDs. so we dont bring categories name here if we want to access
them We would use their ids and fields set in Category Model. Therefore is so important to use GUI interface for choosing
reference type data to not make it mistake. Dont update them in code unless you know every category unique ID reference.</code>
                  </div>
                </div>
              </div>
            
              <div class="band-container partition " part="part-4">
                <div class="band-inner">

                  <p>It is possible to save the record without ObjectID in one of the fields and populate that field later in another post Query</p>
                  <div class="codeWraper">
                    <code>/ --- / 
check if the field is populated ?

post.populated(&#39;author&#39;); // truthy 

/ -- /

What about creating a post ?

/---- the possible post could be: ----/
  &quot;posts&quot;:{
    &quot;title&quot;: &quot;Life of PI&quot;
    &quot;text&quot;: &quot;Aparently is a great book and movie!&quot;
    //author: NOT ADDED
    categories:[
        &quot;ObjectId(4r554353453535353e423d)&quot;,
        &quot;ObjectId(43336353453535353e423d)&quot;
        &quot;ObjectId(55555353453535353e423d)&quot;
    ]
  }

explanation:
just because athour is not required and not unique field we can save our post without it. But that means we just created a post
who doesnt have an author. There are at least 2 wasy to fix that. 

1. use populate method as

  Post.
    findOne({ title: &#39;Casino Royale&#39; })
    .populate(&#39;author&#39;)
    .exec(function (err, story) {
      if (err) return handleError(err);
      console.log(&#39;The author is %s&#39;, story.author.name);
      // prints &quot;The author is Ian Fleming&quot;
    });
This will look for Post title and populate with the ID of the only Author in collection. ONLY one is fine but what if there is more authors?
well then will go crazy. The moongoose documentation says this: &#39;If you have an array of authors in your storySchema, populate() will give you an empty array instead.&#39; so unless U have only one author then will work otherwise dont use populate!

2. Another way of filling the author fiels is to grab current author ID and pass it in POST Query as merge object {author:ObjectID(83t34t),...rest} that way
we fill it right when post in created with the author that is logged in.</code>
                  </div>
                </div>
              </div>
            

            

      </section>
  
  
    <section class="band band-b activeSection">
      <h1></h1>

      



        

    </section>
  
  </div>
</div>

       <!-- nunjucks loop-->
  </div>
</div>
<script src="scripts/nav-links.js"></script>
<script src="scripts/tooltips_links_over.js"></script>
<script src="scripts/search_nav.js"></script>
 </body></html>