<?xml version="1.0" encoding="UTF-8"?>
 <chapters>
   <chapter>
       <subject>ES6 import and export in browser</subject>
       <content>
           <subtitle>ES6 import and export in browser files</subtitle>
           <paragraph>
               <info>Create main.js in a script folder as below that have import and react and react-dom </info>
               <example>
--------------------scripts/main.js------------------------
'use strict';

import React from 'react';
import ReactDOM from 'react-dom';

const title = 'My Minimal React Webpack Babel Setup is set';

ReactDOM.render(
  <div>{title}</div>,
  document.getElementById('app')
);


 --------------------index.html------------------------
 //for runing bundle.js in a browser;

 &lt;!DOCTYPE html>
 &lt;html lang="en">
 &lt;head>
  &lt;meta charset="UTF-8">
  &lt;title>browserify outcome&lt;/title>
 &lt;/head>
 &lt;body>
 &lt;script src="bundle.js">&lt;/script>
 &lt;/body>
 &lt;/html>

 ------------------ ------------------ ------------------

               </example>
           </paragraph>
           <subtitle>ES6 import and export in browser setup</subtitle>
           <paragraph>
               <info>
                 ES6 import and export in browser: 
                 Some of the features of ES6 dont work directly in browser just yet. Therefore we need use transpilers and compilers to make it work.Below Is is simple set up using:
                 1) babel-cli = transpiler to ES5 or node.js code in command line
                 2) babel-preset-env = preset needed for transpiling could be diffrent as react etc.
                 2) babel-preset-react = preset needed for transpiling react into ES5 node.
                 3) browserify = compiler of node.js code to use in browser, allows to use module.exports and require(modules) features in a browser
               </info>
               <example>
--------------- project set up ---------------

npm init -f //start package.json with defaults 

--------------- install babel-cli ---------------

//babel-cli to use in command line only for this example

npm i babel-cli --save or -S (to list in dependencies);

--------------------------------------------------

               </example>
           </paragraph>
           <subtitle>install babel preset</subtitle>
           <paragraph>
               <info>npm i babel-preset-env -S 
               it will traspile your ES6 code into node.js code if you use export/import module feature (require in node.js)
               npm i babel-preset-react -S it will transpile react code into node.js code with require features 
               </info>
               <example>
--------------- install babel presets---------------

npm i babel-preset-env -S 
npm i babel-preset-react -S 

--------------------------------------------------
               </example>
           </paragraph>
           <subtitle>use presets in your package.json </subtitle>
           <paragraph>
               <info>U need to use preset previously installed. U could also make separte file called .babelrc as :

                --------------- .babelrc file as option---------------

                {
                  "presets": ["env","react"]
                }
                --------------------------------------------------

                but it is possible to set it in package.json so why not ;P

               </info>
               <example>
--------------- package.json part---------------

"babel": {
    "presets": [
      "env", "react"
    ]
}
--------------------------------------------------
               </example>
           </paragraph>
           <subtitle>run your babel command for traspiling to ES5</subtitle>
           <paragraph>
               <info>In this exaple we going to run evertying in command line but in real project you would use gulp, grunt or node commands in package.json</info>
               <example>
--------------- run bubel for folder scripts ---------------

//using local install babel ./node_modules/.bin/babel

./node_modules/.bin/babel  ./scripts --experimental --source-maps-inline -d ./lib

--------------------------------------------------

               </example>
           </paragraph>
           <subtitle>run browserfy</subtitle>
           <paragraph>
               <info>run browserfy to the main file:
               now we have traspiled version of files so it is time to compile main.js and run in browser
             </info>
               <example> 
----run browserify only on main.js (since the other depend on it exporting) ----

//using local install browserify ./node_modules/.bin/browserify

./node_modules/.bin/browserify lib/main.js -o bundle.js

----------------run bundle.js in browser ----------------------

open index.html 

//full example folder: simple_setup

---------------- ---------------- ----------------
            </example>
           </paragraph>
       </content>
   </chapter>
   <chapter>
       <subject>React Components</subject>
       <content>
           <subtitle>Functional Component no JSX</subtitle>
           <paragraph>
               <info>Functional Component is a stateless component that calls a function that returns either jsx or React.create() element</info>
               <example>
------------------Functional Component no jsx by-------------------------

React.createElement(HTMLElement,{ name: props.name },"content" or children);

const FunctionalComponent = (props) => {
      return React.createElement(
        "p",
        { name: props.name },
        "I am functional component"
      );
  };
} 

ReactDOM.render(<FunctionalComponent name="Greg" />,document.getElementById('app'));


               </example>
           </paragraph>
           <subtitle>Functional Component with JSX</subtitle>
           <paragraph>
               <info>Functional compoent in again Stateless compoents that accepts props as function argument and returns JSX syntax</info>
               <example>
------------------------- Functional Stateless component-----------

 const FunctionalComponent = (props) => &lt;p>I am functional component&lt;/p>

ReactDOM.render(&lt;FunctionalComponent name="Greg" />,document.getElementById('app'));

-----------------------------------------------------------------
               </example>
           </paragraph>
                  <subtitle>React Components: Statefull Classes</subtitle>
                  <paragraph>
                      <info>StateFull Class Component: it creates a component that accpets props and allows you to define 'state' and ref. Use only if you need that you need to change the state. You dont need to use JSX but it is preferable.</info>
                      <example>
                        
class Hello extends React.Component {
  constructor(props){
    super(props);
    this.state={value:0}
  }
  render() {
    return &lt;div>Hello {this.props.toWhat} &lt;/div>;
  }
}

ReactDOM.render(
  &lt;Hello toWhat="World" />,
  document.getElementById('root')
);
                      </example>
                  </paragraph>
       </content>
   </chapter>
  <chapter>
      <subject>JSX syntax</subject>
      <content>
          <subtitle>JSX single line</subtitle>
          <paragraph>
              <info>JSX could be set on single line and it needs {variable,js expresion} to interpolate that into syntax</info>
              <example>
---------------- jsx single Line--------------

  const info = 'info';
  const fn = value=> `myValue ${value}`

  const jsxExample = &lt;div>{info} {fn('set')} {5+5} &lt;/div>

  ReactDOM.render(
    jsxExample,
    document.getElementById('root')
  );
------------------------------------------------
              </example>
          </paragraph>
          <subtitle>JSX multiple line</subtitle>
          <paragraph>
              <info>for clarity JSX could and should be set on multiple lines with () and it accepts {variable,js expresion} to interpolate that into syntax</info>
              <example>
---------------- jsx multiple Line needs () parenthesis--------------

const info = 'info';
const fn = value=> `myValue ${value}`

const jsxExample = (
                    &lt;div>
                      {info}
                      {fn('set')} 
                      {5+5} 
                    &lt;/div>
                    );

ReactDOM.render(
  jsxExample,
  document.getElementById('root')
);
------------------------------------------------
              </example>
          </paragraph>
          <subtitle>JSX nesting</subtitle>
          <paragraph>
              <info>U could nest your jsx and render them into one jsx</info>
              <example>
---------------- jsx multiple Line--------------

const nestAndRenderArray = [1,2,3,4];
//create jsx outside
const outside = nestAndRenderArray.map( arrEl => &lt;p key={arrEl+3} > myElements: {arrEl} &lt;/p>);

const jsxExample = (
            &lt;div>
                &lt;div>
                    {&lt;p>{5+5}&lt;/p>}
                 &lt;/div>
                      {   nestAndRenderArray.map( arrEl =>
                            &lt;p key={arrEl} > myElements: {arrEl} &lt;/p>)
                      }
                &lt;div>
                    {outside}
                &lt;/div>
            &lt;/div>
        );

ReactDOM.render(
  jsxExample,
  document.getElementById('root')
);
------------------------------------------------



              </example>
          </paragraph>
      </content>
  </chapter>
  <chapter>
      <subject>JEST and ENZYME  setup</subject>
      <content>
          <paragraph>
              <info>JEST and ENZYME setup</info>
              <example>

                      //to start testing with Enzyme and JEST you need to install those packages saved in dev dependencies;

                      npm i  enzyme enzyme-adapter-react-16 jest babel-jest -D and also in your package.json you  need this bit for trasnpiling 

                      "babel": {
                          "presets": [
                            "env",
                            "react"
                          ]
                        },

                        so U also need those : npm i babel-preset-env babel-preset-react -S

                        example: react_tuts/react_examples/tests-react/jest-testing-function-mocks

              </example>
          </paragraph>
      </content>
  </chapter>
  <chapter>
      <subject>JEST and ENZYME testing (functions) </subject>
      <content>
          <subtitle>by implementing original function for test</subtitle>
          <paragraph>
              <info>the most common way of testing functionality of the method is simply run the method and 
                expect to give you back what is declared in function body (method has to be return type!) for that</info>
              <example>
----------------------- math.js helpers ----------------
export const add      = (a, b) => a + b;
export const subtract = (a, b) => b - a;
---------------------------------------------------------

----------------------- app.js (math helpers implementation) ----------------
export const doAdd      = (a, b) => math.add(a, b);
export const doSubtract = (a, b) => math.subtract(a, b);
-----------------------------------------------------------------------------

--------------- now testing those implemenations --------------------------
import * as app from "./app";
import * as math from "./math";

/*
  *@test base function
  *@by running it
*/
test("calls math.add", () => {
    const add = math.add(1,2)
    expect(add).toBe(3)
})
/*
  *@test higher-order function
  *@by running it
*/
test("calls app.doAdd", () => {
    const appAdd = app.doAdd(1,2)
    expect(appAdd).toBe(3)
})
----------------------------------------------------------------------------
              </example>
          </paragraph>
          <subtitle>testing with mock function js.fn();</subtitle>
          <paragraph>
              <info>if data is complex in a funtion and you might be intrested only in the outcome (as promise to API call) we can mock function</info>
              <example>
----------------------- math.js helpers ----------------
export const add      = (a, b) => a + b;
export const subtract = (a, b) => b - a;
---------------------------------------------------------

----------------------- app.js (math helpers implementation) ----------------
export const doAdd      = (a, b) => math.add(a, b);
export const doSubtract = (a, b) => math.subtract(a, b);
-----------------------------------------------------------------------------


/*
  *@we can assing our function to js.fn()
  *@what gives them new functionality, they are no longer original function;
*/  

/*


math.add = jest.fn()
app.doAdd = jest.fn() 

/*
*@now our function can be called as below;
*@the old functionality is gone;
*/

//assign to mock 
-----------
const mathNew = math.add("new staff")
const appNew = app.doAdd( "I am cool")
-------------

//math.add
expect(mathNew).toBeUndefined()
expect(math.add).toHaveBeenCalled()
expect(math.add).toHaveBeenCalledTimes(1)
expect(math.add).toHaveBeenCalledWith("new staff")

//app.doAdd
expect(appNew).toBeUndefined()
expect(app.doAdd).toHaveBeenCalled()
expect(app.doAdd).toHaveBeenCalledTimes(1)
expect(app.doAdd).toHaveBeenCalledWith("I am cool")          

              </example>
          </paragraph>
          <subtitle>mock function with return value</subtitle>
          <paragraph>
              <info>One function is assign to mock we can make it a return a value, this patern is very usefull when We want to mock API call that returns a JSON file</info>
              <example>
----------------------- math.js helpers ----------------
export const add      = (a, b) => a + b;
export const subtract = (a, b) => b - a;
---------------------------------------------------------

----------------------- app.js (math helpers implementation) ----------------
export const doAdd      = (a, b) => math.add(a, b);
export const doSubtract = (a, b) => math.subtract(a, b);
-----------------------------------------------------------------------------
                
/*
*@assignning mocks to the functions of return type ;
*@
*/

math.add = jest.fn().mockImplementation( () => "some Value" );
//other syntax;
app.doAdd = jest.fn()
app.doAdd.mockReturnValue("bar value")

/*
*@testing function with mock return 
*@
*/

//math.add
expect(math.add()).toBe("some Value")
//app.doAdd
expect(app.doAdd()).toBe("bar value")



              </example>
          </paragraph>
                    <subtitle>mock function with promise return</subtitle>
                    <paragraph>
                        <info>we can mock our function to return a promise as below:</info>
                        <example>
----------------------- math.js helpers ----------------
export const add      = (a, b) => a + b;
export const subtract = (a, b) => b - a;
---------------------------------------------------------

----------------------- app.js (math helpers implementation) ----------------
export const doAdd      = (a, b) => math.add(a, b);
export const doSubtract = (a, b) => math.subtract(a, b);
-----------------------------------------------------------------------------
                
/*
*@assignning mocks to the functions that return promise;
*@
*/

math.add = jest.fn().mockImplementation(() => Promise.resolve("promise resolve"))
math.devide = jest.fn().mockImplementation((value) => Promise.reject(value))
//other syntax;
app.doAdd = jest.fn()
app.doAdd.mockResolvedValue("bar")
//reject other syntax;
math.devide = jest.fn()
app.doAdd.mockRejectedValue("rejected");

/*
*@now our function can be called as below;
*@the old functionality is gone now our function returns above values that resolves in promise resolved;
*/

//math.add
expect(math.add()).resolves.toBe("promise resolve")
expect(app.doAdd()).resolves.toBe("bar")
expect(math.devide("rejected")).rejects.toBe("rejected")

-----------------------------------------------------------------------------------------------

                        </example>
                    </paragraph>
      </content>
  </chapter>
  <chapter>
      <subject>Mock a module with jest.mock</subject>
      <content>
        <paragraph>
          <info>you can automatically assing mock functions to all function from the moduele by jest.mock();</info>
          <example>
----------------------- math.js helpers ----------------
export const add      = (a, b) => a + b;
export const subtract = (a, b) => b - a;
---------------------------------------------------------

describe("use js.mock() for all exported fn",() => {
// Set all module functions to jest.fn
  jest.mock("./helpers/math")

  test("using js.mock() for mocking all exported functions from the module", ()=>{

      //pick any function from module set to mock and call it;
      math.add("add")
      expect(math.add).toHaveBeenCalledWith("add")
  })
})
          </example>
      </paragraph>      
    </content>
  </chapter>
  <chapter>
      <subject>jest.spyOn to mock a funtion but later restore its original implementation </subject>
      <content>
        <paragraph>
            <info>jest.spyOn() to mock a funtion but later restore its original implementation later in the same test by mockFn.mockRestore()</info>
            <example>
 ----------------------- math.js helpers ----------------
 export const add      = (a, b) => a + b;
 export const subtract = (a, b) => b - a;
 ---------------------------------------------------------

 describe("use js.spyOn() to mock function and then restore original implementation",()=>{
     const addMock = jest.spyOn(math, "add")

     // override the implementation
     addMock.mockImplementation(() => "mock")
     expect(app.doAdd(1, 2)).toEqual("mock")

     // restore the original implementation
     addMock.mockRestore()
     expect(app.doAdd(1, 2)).toEqual(3)
 })
            </example>
        </paragraph>
      </content>
  </chapter>
 </chapters>